System.register(["./chunk-vendor.js","./chunk-frameworks.js"],(function(){"use strict";var e,t,n,s,o,c,r,a,l,u;return{setters:[function(s){e=s.a,t=s.o,n=s.r},function(e){s=e.K,o=e.L,c=e.C,r=e.r,a=e.l,l=e.b5,u=e.b6}],execute:function(){function i(){document.body.classList.add("is-sending"),document.body.classList.remove("is-sent","is-not-sent")}function d(){document.body.classList.add("is-sent"),document.body.classList.remove("is-sending")}function f(e){e&&(document.querySelector(".js-sms-error").textContent=e),document.body.classList.add("is-not-sent"),document.body.classList.remove("is-sending")}e("details-menu-selected",".js-select-plan-menu",(function(e){const t=e.detail.relatedTarget,n=document.querySelectorAll(".js-plan-card-section");for(const r of n)r instanceof HTMLElement&&(r.hidden=!0);const s=e.currentTarget.querySelectorAll("[role^=menuitem]"),o=Array.from(s).indexOf(t),c=Array.from(n)[o];c instanceof HTMLElement&&(c.hidden=!1)}),{capture:!0}),t(".js-transform-notice",{constructor:HTMLElement,add(e){const t=s("org_transform_notice");for(const s of t){const t=document.createElement("span");try{t.textContent=atob(decodeURIComponent(s.value)),o(s.key),e.appendChild(t),e.hidden=!1}catch(n){}return}}}),n(".js-send-auth-code",(async(e,t)=>{let n;i();try{n=await t.text()}catch(s){f(s.response.text)}n&&d()})),e("click",".js-send-two-factor-code",(async function(e){const t=e.currentTarget,n=t.form,s=`${n.querySelector(".js-country-code-select").value} ${n.querySelector(".js-sms-number").value}`;i();const o=t.parentElement.querySelector(".js-data-url-csrf"),c=new FormData;c.append("number",s);const r=t.getAttribute("data-url"),a=await fetch(r,{method:"POST",mode:"same-origin",body:c,headers:{"Scoped-CSRF-Token":o.value,"X-Requested-With":"XMLHttpRequest"}});if(a.ok)d(),n.querySelector(".js-2fa-otp").focus();else{f(await a.text())}for(const l of n.querySelectorAll(".js-2fa-enable"))(l instanceof HTMLInputElement||l instanceof HTMLButtonElement)&&(l.disabled=!a.ok)})),e("click",".js-enable-enable-two-factor-auth-button",(function(){const e=document.querySelector(".js-enable-two-factor-auth-button");e.disabled=!1,e.removeAttribute("aria-label"),e.classList.remove("tooltipped")})),t(".js-two-factor-sms-fallback-button",(function(e){e.addEventListener("toggle",(function(e){const t=e.currentTarget;for(const n of t.querySelectorAll(".flash"))n instanceof HTMLElement&&(n.hidden=!0);t.querySelector(".js-configure-sms-fallback").hidden=!1,t.querySelector(".js-verify-sms-fallback").hidden=!0}))})),n(".js-two-factor-set-sms-fallback",(async(e,t)=>{let n;try{n=await t.text()}catch(s){const t=e.querySelector(".js-configure-sms-fallback"),n=e.querySelector(".js-verify-sms-fallback"),o=(t.hidden?n:t).querySelector(".flash");switch(s.response.status){case 422:case 429:o.textContent=s.response.text,o.hidden=!1}}if(n)switch(n.status){case 200:case 201:window.location.reload();break;case 202:e.querySelector(".js-configure-sms-fallback").hidden=!0,e.querySelector(".js-verify-sms-fallback").hidden=!1,e.querySelector(".js-fallback-otp").focus()}})),c(".js-verification-code-input-auto-submit",(function(e){const t=e.currentTarget,n=t.pattern||"[0-9]{6}";new RegExp(`^(${n})$`).test(t.value)&&r(t.form)})),t(".js-webauthn-support",{constructor:HTMLInputElement,add(e){a(e,l())}}),t(".js-webauthn-iuvpaa-support",{constructor:HTMLInputElement,async add(e){a(e,await u())}})}}}));
//# sourceMappingURL=sessions-7d8e304d.js.map
